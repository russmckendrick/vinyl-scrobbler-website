{{ $title := .Get "title" | default "On this page" }}

<div class="my-8 p-6 rounded-xl bg-vinyl-black/5 border border-vinyl-black/10 dark:bg-vinyl-black dark:border-vinyl-cream/10">
    <h2 class="text-lg font-semibold text-vinyl-black mb-4 dark:text-vinyl-cream">{{ $title }}</h2>
    <nav class="space-y-1">
        {{ range .Page.HeadingsFiltered }}
        <a href="#{{ .ID }}" 
           class="block py-2 px-3 text-vinyl-black/80 hover:bg-vinyl-black/5 rounded-lg transition-colors duration-200 {{ if eq .Level 2 }}font-medium{{ else }}text-sm pl-6{{ end }} dark:text-vinyl-cream/80 dark:hover:bg-vinyl-cream/5">
            {{ .Title }}
        </a>
        {{ end }}
    </nav>
</div>

<script>
// Highlight current section in TOC
window.addEventListener('scroll', () => {
    const headings = document.querySelectorAll('h2, h3');
    const tocLinks = document.querySelectorAll('.toc a');
    
    let current = '';
    
    headings.forEach(heading => {
        const top = heading.getBoundingClientRect().top;
        
        if (top < 100) {
            current = '#' + heading.id;
        }
    });
    
    tocLinks.forEach(link => {
        link.classList.remove('bg-vinyl-black/5', 'dark:bg-vinyl-cream/5');
        if (link.getAttribute('href') === current) {
            link.classList.add('bg-vinyl-black/5', 'dark:bg-vinyl-cream/5');
        }
    });
});</script> 