{{ define "main" }}
<style>
    html {
        scroll-padding-top: 100px; /* Adjust this value to match your nav height */
        scroll-behavior: smooth;
    }
</style>

<div class="relative">
    {{ if not .Params.hideHeader }}
    <div class="relative px-4 pt-32 pb-20 sm:px-6 lg:px-8 lg:pt-40 lg:pb-28 bg-gradient-primary from-vinyl-coral via-vinyl-orange to-vinyl-blue">
        <div class="mx-auto max-w-7xl">
            <div class="text-center">
                <h1 class="text-[4rem] sm:text-[5rem] leading-none font-extra-bold tracking-tight">
                    <span class="block text-vinyl-cream">{{ .Title }}</span>
                </h1>
            </div>
        </div>
    </div>
    {{ end }}

    <div class="relative py-24 bg-vinyl-black">
        <div class="mx-auto max-w-3xl px-4 sm:px-6 lg:px-8">
            <div class="bg-vinyl-black/50 backdrop-blur-sm rounded-2xl p-8 shadow-2xl">
                {{ if eq .Title "Features" }}
                    <div class="space-y-16">
                        {{ range $section := slice "Comprehensive Vinyl Management" "Advanced Tracking" "Social Features" "Technical Features" }}
                            <div class="space-y-6">
                                <h2 class="text-2xl font-bold gradient-text">{{ $section }}</h2>
                                <ul class="space-y-6">
                                    {{ range $.Page.Params.features }}
                                        {{ if eq .section $section }}
                                            <li class="flex items-start space-x-4">
                                                <div class="flex-shrink-0">
                                                    <div class="flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-primary from-vinyl-coral to-vinyl-blue">
                                                        <svg class="h-5 w-5 text-vinyl-cream" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                                        </svg>
                                                    </div>
                                                </div>
                                                <div>
                                                    <h3 class="text-lg font-semibold text-vinyl-cream">{{ .title }}</h3>
                                                    <p class="mt-2 text-vinyl-cream/60">{{ .description }}</p>
                                                </div>
                                            </li>
                                        {{ end }}
                                    {{ end }}
                                </ul>
                            </div>
                        {{ end }}
                    </div>
                {{ else }}
                    {{ if .Params.toc }}
                    <div class="mb-8 p-6 rounded-xl bg-vinyl-black border border-vinyl-cream/10">
                        <button onclick="toggleTOC()" class="w-full flex items-center justify-between text-lg font-semibold text-vinyl-cream mb-4">
                            <span>{{ .Params.tocTitle | default "Contents" }}</span>
                            <svg id="tocIcon" class="h-5 w-5 transform transition-transform duration-200 {{ if .Params.tocExpanded }}rotate-180{{ end }}" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                            </svg>
                        </button>
                        <nav id="tocContent" class="space-y-1 {{ if not .Params.tocExpanded }}hidden{{ end }}">
                            {{ $headers := findRE "<h[2-3].*?>(.|\n)*?</h[2-3]>" .Content }}
                            {{ range $headers }}
                                {{ $header := . }}
                                {{ $level := int (substr (substr . 2 1) 0 1) }}
                                {{ $title := replaceRE "<[^>]*>" "" . }}
                                {{ $id := $title | urlize }}
                                <a href="#{{ $id }}" 
                                   class="block py-2 px-3 text-vinyl-cream/80 hover:bg-vinyl-cream/5 rounded-lg transition-colors duration-200 {{ if eq $level 2 }}font-medium{{ else }}text-sm pl-6{{ end }}">
                                    {{ $title }}
                                </a>
                            {{ end }}
                        </nav>
                    </div>
                    <script>
                        function toggleTOC() {
                            const content = document.getElementById('tocContent');
                            const icon = document.getElementById('tocIcon');
                            content.classList.toggle('hidden');
                            icon.classList.toggle('rotate-180');
                        }
                    </script>
                    {{ end }}
                    <div class="prose prose-lg prose-invert mx-auto">
                        {{ .Content }}
                    </div>
                {{ end }}
            </div>
        </div>
    </div>
</div>
{{ end }}
